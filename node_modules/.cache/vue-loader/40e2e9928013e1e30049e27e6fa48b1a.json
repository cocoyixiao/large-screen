{"remainingRequest":"/Users/edy/work/large-screen/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edy/work/large-screen/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edy/work/large-screen/src/App.vue","mtime":1680503037134},{"path":"/Users/edy/work/large-screen/node_modules/babel-loader/lib/index.js","mtime":1679560602183},{"path":"/Users/edy/work/large-screen/node_modules/cache-loader/dist/cjs.js","mtime":1679560601711},{"path":"/Users/edy/work/large-screen/node_modules/vue-loader/lib/index.js","mtime":1679560602306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBTY2FsZUJveCBmcm9tICd2dWUyLXNjYWxlLWJveCcKaW1wb3J0IE1hcENoaW5hIGZyb20gJy4vY29tcG9uZW50cy9NYXBDaGluYS52dWUnCmltcG9ydCBNb250aERhdGEgZnJvbSAnLi9jb21wb25lbnRzL01vbnRoRGF0YS52dWUnCmltcG9ydCBMZWZ0U2lkZXIgZnJvbSAnLi9jb21wb25lbnRzL0xlZnRTaWRlci52dWUnCmltcG9ydCBSaWdodFNpZGVyIGZyb20gJy4vY29tcG9uZW50cy9SaWdodFNpZGVyLnZ1ZScKaW1wb3J0IFJvbGxOdW1iZXIgZnJvbSAnLi9jb21wb25lbnRzL1JvbGxOdW1iZXIudnVlJwppbXBvcnQgewogIGxvZ2luLAogIGluZGV4RGF0YSwKICBnZXREb2N0b3JEYXRhcwp9IGZyb20gJy4vYXBpL2NvaW4nCmltcG9ydCB7CiAgc2V0VG9rZW4sCiAgZ2V0VG9rZW4KfSBmcm9tICcuL3V0aWxzL2F1dGgnCmltcG9ydCB7CiAgZ2V0QXBwVG9rZW4KfSBmcm9tICcuL3V0aWxzL2dldC10b2tlbicKaW1wb3J0IHsKICBxdWVyeVBhcmFtcwp9IGZyb20gJy4vdXRpbHMvX3V0aWwnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBjb21wb25lbnRzOiB7CiAgICBTY2FsZUJveCwKICAgIE1vbnRoRGF0YSwKICAgIE1hcENoaW5hLAogICAgTGVmdFNpZGVyLAogICAgUmlnaHRTaWRlciwKICAgIFJvbGxOdW1iZXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoYW5Mb2dpbjogZmFsc2UsCiAgICAgIHRvZGF5UGF0aWVudDogMCwKICAgICAgdG9kYXlEb2N0b3I6IDAsCiAgICAgIHRvZGF5UGF0aWVudE9sZDogMCwKICAgICAgdG9kYXlEb2N0b3JPbGQ6IDAsCiAgICAgIHRpbWU6ICcnLAogICAgICB0b2tlbjogJycsCiAgICAgIGRvY3Rvckxpc3Q6IFtdLAogICAgICBpbmRleERhdGE6IG51bGwsCiAgICAgIHdlbnpoZW5OdW1iZXI6IDAsCiAgICAgIHVwZGF0ZVRpbWU6IDUgKiA2MCAqIDEwMDAsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgZXJyb3JNc2c6ICcnLAogICAgICB0aW1lcjogbnVsbAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGNvbnN0IHNvdXJjZSA9IHF1ZXJ5UGFyYW1zKCdmcm9tJykKICAgIGlmIChzb3VyY2UgPT09ICdhcHAnKSB7CiAgICAgIGdldEFwcFRva2VuKCkudGhlbihyZXMgPT4gewogICAgICAgIHNldFRva2VuKHJlcykKICAgICAgICB0aGlzLmluaXREYXRhcygpCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIH0pCiAgICB9IGVsc2UgewogICAgICBjb25zdCBoYXNUb2tlbiA9IGdldFRva2VuKCkKICAgICAgaWYgKGhhc1Rva2VuKSB7CiAgICAgICAgdGhpcy5pbml0RGF0YXMoKQogICAgICB9CiAgICB9CiAgICB0aGlzLmluaXRCb2R5U2l6ZSgpCiAgfSwKICB3YXRjaDogewogICAgcGFzc3dvcmQodmFsKSB7CiAgICAgIGlmICghdmFsKSB7CiAgICAgICAgdGhpcy5lcnJvck1zZyA9ICcnCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdCgpIHsKICAgICAgbG9naW4oewogICAgICAgIHB3ZDogdGhpcy5wYXNzd29yZAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5tZXNzYWdlKSB7CiAgICAgICAgICB0aGlzLmVycm9yTXNnID0gcmVzLm1lc3NhZ2UKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBpZiAocmVzLmNvZGU9PT0yMDApIHsKICAgICAgICAgIGNvbnN0IHRva2VuID0gcmVzLmRhdGEudG9rZW4KICAgICAgICAgIHNldFRva2VuKHRva2VuKQogICAgICAgICAgdGhpcy5pbml0RGF0YXMoKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBpbml0RGF0YXMoKSB7CiAgICAgIHRoaXMuaGFuTG9naW4gPSB0cnVlCiAgICAgIHRoaXMuZ2V0SW5kZXhEYXRhcygpCiAgICAgIHRoaXMuaW5pdFRpbWUoKQogICAgfSwKICAgIGluaXRUaW1lKCkgewogICAgICB0aGlzLmNyZWF0VGltZSgpCiAgICAgIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICB0aGlzLmNyZWF0VGltZSgpCiAgICAgIH0sIDEwMDApCiAgICB9LAogICAgZ2V0SW5kZXhEYXRhcygpIHsKICAgICAgaW5kZXhEYXRhKHt9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKCFyZXMuY29kZSkgewogICAgICAgICAgdGhpcy5oYW5Mb2dpbiA9IGZhbHNlCiAgICAgICAgICByZXR1cm4KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5oYW5Mb2dpbiA9IHRydWUKICAgICAgICAgIHRoaXMuaW5kZXhEYXRhID0gcmVzLmRhdGEKICAgICAgICAgIHRoaXMuJHJlZnMucmlnaHRTaWRlclJlZi5pbml0VGFyZ2V0KHJlcy5kYXRhLnRhcmdldF9wZXIpCiAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFzKCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgdXBkYXRlRGF0YXMoKSB7CiAgICAgIGdldERvY3RvckRhdGFzKHt9KS50aGVuKGRhdGEgPT4gewogICAgICAgIGNvbnN0IHJlcyA9IGRhdGEuZGF0YQogICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlcy53ZW56aGVuTnVtCiAgICAgICAgLy8g5Lit6Ze05aSn5pWw5a2XCiAgICAgICAgdGhpcy50b2RheVBhdGllbnRPbGQgPSB0aGlzLnRvZGF5UGF0aWVudCB8fCByZXN1bHQudG9kYXkucGF0X251bQogICAgICAgIHRoaXMudG9kYXlQYXRpZW50ID0gcmVzdWx0LnRvZGF5LnBhdF9udW0KICAgICAgICBjb25zdCBkaXNQYXQgPSB0aGlzLnRvZGF5UGF0aWVudCAtIHRoaXMudG9kYXlQYXRpZW50T2xkCiAgICAgICAgY29uc29sZS5sb2codGhpcy50b2RheVBhdGllbnRPbGQsIGRpc1BhdCkKICAgICAgICB0aGlzLiRyZWZzLnJvbGxQYXRpZW50UmVmLmluaXRSb2xsKHRoaXMudG9kYXlQYXRpZW50T2xkLCBkaXNQYXQpCgogICAgICAgIHRoaXMudG9kYXlEb2N0b3JPbGQgPSB0aGlzLnRvZGF5RG9jdG9yIHx8IHJlc3VsdC50b2RheS5kb2NfbnVtCiAgICAgICAgdGhpcy50b2RheURvY3RvciA9IHJlc3VsdC50b2RheS5kb2NfbnVtCiAgICAgICAgY29uc3QgZGlzRG9jID0gdGhpcy50b2RheURvY3RvciAtIHRoaXMudG9kYXlEb2N0b3JPbGQKICAgICAgICB0aGlzLiRyZWZzLnJvbGxEb2N0b3JSZWYuaW5pdFJvbGwodGhpcy50b2RheURvY3Rvck9sZCwgZGlzRG9jKQoKICAgICAgICB0aGlzLndlbnpoZW5OdW1iZXIgPSByZXN1bHQudG9kYXkud2Vuemhlbl9udW0KCiAgICAgICAgLy8g5bem5L6n5pWw5o2u6K6h566XCiAgICAgICAgdGhpcy5yZXNldExlZnREYXRhKCkKICAgICAgICAvLyDlj7PkvqfljLvnlJ/liJfooagKICAgICAgICB0aGlzLiRyZWZzLnJpZ2h0U2lkZXJSZWYuaW5pdExpc3QocmVzdWx0LmRvY3Rvckxpc3QpCiAgICAgICAgLy8g5Yid5aeL5YyW5Lit6Ze05pWw5o2uCiAgICAgICAgdGhpcy4kcmVmcy5tb250aFJlZi5pbml0KHRoaXMuaW5kZXhEYXRhLmhpc3RvcnlfbnVtKQogICAgICAgIHRoaXMuJHJlZnMubWFwUmVmLmluaXQodGhpcy5pbmRleERhdGEucGhhcm1hY3lvcmRlcjMwKQogICAgICAgIAogICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpPT4gewogICAgICAgICAgdGhpcy51cGRhdGVEYXRhcygpCiAgICAgICAgfSwgdGhpcy51cGRhdGVUaW1lKQogICAgICB9KQogICAgfSwKICAgIHJlc2V0TGVmdERhdGEoKSB7CiAgICAgIGNvbnN0IGxlZnRSZWYgPSB0aGlzLiRyZWZzLmxlZnRTaWRlclJlZgogICAgICBjb25zdCB3ek51bSA9IHRoaXMuaW5kZXhEYXRhLndlbnpoZW5OdW0KICAgICAgY29uc3QgeWVhckRhdGEgPSB3ek51bS55ZWFyLndlbnpoZW5fbnVtICsgdGhpcy53ZW56aGVuTnVtYmVyCiAgICAgIGNvbnN0IG1vbnRoRGF0YSA9IHd6TnVtLm1vbnRoLndlbnpoZW5fbnVtICsgdGhpcy53ZW56aGVuTnVtYmVyCiAgICAgIGNvbnN0IHdlZWtEYXRhID0gd3pOdW0ud2Vlay53ZW56aGVuX251bSArIHRoaXMud2Vuemhlbk51bWJlcgogICAgICBsZWZ0UmVmLmluaXRXZW5aaGVuKHllYXJEYXRhLCBtb250aERhdGEsIHdlZWtEYXRhKQoKICAgICAgbGVmdFJlZi5pbml0TWFuV29tYW4od3pOdW0ueWVhci5tYW5fcGVyIC8gMTAwLCB3ek51bS55ZWFyLndvbWFuX3BlciAvIDEwMCkKCiAgICAgIGxlZnRSZWYuaW5pdFN1Z2dlc3QodGhpcy5pbmRleERhdGEuY29tcGxhaW4pCiAgICB9LAogICAgY3JlYXRUaW1lKCkgewogICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICBjb25zdCBkYXRlcyA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICBjb25zdCBkYXkgPSBuZXcgQXJyYXkoIuaYn+acn+aXpSIsICLmmJ/mnJ/kuIAiLCAi5pif5pyf5LqMIiwgIuaYn+acn+S4iSIsICLmmJ/mnJ/lm5siLCAi5pif5pyf5LqUIiwgIuaYn+acn+WFrSIpW2RhdGUuZ2V0RGF5KCldOwogICAgICBjb25zdCBob3VyID0gZGF0ZS5nZXRIb3VycygpIDwgMTAgPyAiMCIgKyBkYXRlLmdldEhvdXJzKCkgOiBkYXRlLmdldEhvdXJzKCk7CiAgICAgIGNvbnN0IG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpIDwgMTAgPyAiMCIgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpCiAgICAgIGNvbnN0IHNlY29uZHMgPSBkYXRlLmdldFNlY29uZHMoKSA8IDEwID8gIjAiICsgZGF0ZS5nZXRTZWNvbmRzKCkgOiBkYXRlLmdldFNlY29uZHMoKQogICAgICB0aGlzLnRpbWUgPSB5ZWFyICsgIuW5tCIgKyBtb250aCArICLmnIgiICsgZGF0ZXMgKyAi5pelICIgKyBob3VyICsgIjoiICsgbWludXRlICsgIjoiICsgc2Vjb25kcyArICIgIiArIGRheTsKICAgIH0sCiAgICBpbml0Qm9keVNpemUoKSB7CiAgICAgIHZhciBib2R5U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpCiAgICAgIGJvZHlTdHlsZS5pbm5lckhUTUwgPSBgYm9keXt3aWR0aDoxOTIwcHg7IGhlaWdodDoxMDgwcHghaW1wb3J0YW50O31gCiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5hcHBlbmRDaGlsZChib2R5U3R5bGUpCgogICAgICBmdW5jdGlvbiByZWZyZXNoU2NhbGUoKSB7CiAgICAgICAgbGV0IGRvY1dpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOwogICAgICAgIGxldCBkb2NIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgICAgIHZhciBkZXNpZ25XaWR0aCA9IDE5MjAKICAgICAgICB2YXIgZGVzaWduSGVpZ2h0ID0gMTA4MAogICAgICAgIHZhciB3aWR0aFJhdGlvID0gZG9jV2lkdGggLyBkZXNpZ25XaWR0aAogICAgICAgIHZhciBoZWlnaHRSYXRpbyA9IGRvY0hlaWdodCAvIGRlc2lnbkhlaWdodDsgLy8g57yp5pS+5q+U5L6LCiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZSA9IGB0cmFuc2Zvcm06c2NhbGUoIiArIHdpZHRoUmF0aW8gKyAiLCIgKyBoZWlnaHRSYXRpbyArICIpO3RyYW5zZm9ybS1vcmlnaW46bGVmdCB0b3A7YDsKICAgICAgICAvLyDlupTlr7nmtY/op4jlmagg5YWo5bGP5YiH5o2i5YmN5ZCOIOeql+WPo+WboOefreaagua7muWKqOadoemXrumimOWHuueOsOacquWNoOa7oeaDheWGtQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGxhdGVXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwKICAgICAgICAgICAgbGF0ZUhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7CiAgICAgICAgICBpZiAobGF0ZVdpZHRoID09PSBkb2NXaWR0aCkgcmV0dXJuOwoKICAgICAgICAgIHdpZHRoUmF0aW8gPSBsYXRlV2lkdGggLyBkZXNpZ25XaWR0aAogICAgICAgICAgaGVpZ2h0UmF0aW8gPSBsYXRlSGVpZ2h0IC8gZGVzaWduSGVpZ2h0CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlID0gInRyYW5zZm9ybTpzY2FsZSgiICsgd2lkdGhSYXRpbyArICIsIiArIGhlaWdodFJhdGlvICsgIik7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0IHRvcDsiCiAgICAgICAgfSwgMCkKICAgICAgfQogICAgICByZWZyZXNoU2NhbGUoKQoKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInBhZ2VzaG93IiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoZS5wZXJzaXN0ZWQpIHsgLy8g5rWP6KeI5Zmo5ZCO6YCA55qE5pe25YCZ6YeN5paw6K6h566XCiAgICAgICAgICByZWZyZXNoU2NhbGUoKQogICAgICAgIH0KICAgICAgfSwgZmFsc2UpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgcmVmcmVzaFNjYWxlLCBmYWxzZSk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n<div id=\"app\">\n  <ScaleBox :width=\"1920\" :height=\"1080\" bgc=\"transparent\" :delay=\"100\">\n    <template>\n      <div class=\"login-area\" v-if=\"!hanLogin\">\n        <div class=\"login area\">\n          <h2>登录</h2>\n          <div class=\"login-content\">\n            <div class=\"pwd-line\">\n              <span>密码：</span>\n              <input v-model=\"password\" type=\"text\" @keyup.enter=\"submit\" />\n            </div>\n            <p class=\"error-msg\" v-if=\"errorMsg\">{{ errorMsg }}</p>\n            <button class=\"login-btn\" @click=\"submit\">登录</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"page\" v-else>\n        <div class=\"header\">\n          <h1>名医在线数据大屏</h1>\n          <p class=\"time\">{{ time }}</p>\n          <p class=\"header-bg\"></p>\n        </div>\n        <div class=\"wrapper\">\n          <LeftSider ref=\"leftSiderRef\" />\n          <div class=\"content\">\n            <div class=\"total-content\">\n              <div class=\"patient total-area\">\n                <RollNumber ref=\"rollPatientRef\" />\n                <!-- <p class=\"number\" ref=\"patientRef\">{{ todayPatient }}</p> -->\n                <p class=\"total-title\">今日服务患者</p>\n              </div>\n              <div class=\"doctor total-area\">\n                <RollNumber ref=\"rollDoctorRef\" />\n                <p class=\"total-title\">今日接诊医生</p>\n              </div>\n            </div>\n            <MonthData ref=\"monthRef\" />\n            <div class=\"map-waper\">\n              <MapChina ref=\"mapRef\" />\n            </div>\n          </div>\n          <RightSider ref=\"rightSiderRef\" />\n        </div>\n      </div>\n    </template>\n  </ScaleBox>\n</div>\n</template>\n\n<script>\nimport ScaleBox from 'vue2-scale-box'\nimport MapChina from './components/MapChina.vue'\nimport MonthData from './components/MonthData.vue'\nimport LeftSider from './components/LeftSider.vue'\nimport RightSider from './components/RightSider.vue'\nimport RollNumber from './components/RollNumber.vue'\nimport {\n  login,\n  indexData,\n  getDoctorDatas\n} from './api/coin'\nimport {\n  setToken,\n  getToken\n} from './utils/auth'\nimport {\n  getAppToken\n} from './utils/get-token'\nimport {\n  queryParams\n} from './utils/_util'\nexport default {\n  name: 'App',\n  components: {\n    ScaleBox,\n    MonthData,\n    MapChina,\n    LeftSider,\n    RightSider,\n    RollNumber\n  },\n  data() {\n    return {\n      hanLogin: false,\n      todayPatient: 0,\n      todayDoctor: 0,\n      todayPatientOld: 0,\n      todayDoctorOld: 0,\n      time: '',\n      token: '',\n      doctorList: [],\n      indexData: null,\n      wenzhenNumber: 0,\n      updateTime: 5 * 60 * 1000,\n      password: '',\n      errorMsg: '',\n      timer: null\n    }\n  },\n  mounted() {\n    const source = queryParams('from')\n    if (source === 'app') {\n      getAppToken().then(res => {\n        setToken(res)\n        this.initDatas()\n      }).catch(e => {\n        console.log(e)\n      })\n    } else {\n      const hasToken = getToken()\n      if (hasToken) {\n        this.initDatas()\n      }\n    }\n    this.initBodySize()\n  },\n  watch: {\n    password(val) {\n      if (!val) {\n        this.errorMsg = ''\n      }\n    }\n  },\n  methods: {\n    submit() {\n      login({\n        pwd: this.password\n      }).then(res => {\n        if (res.message) {\n          this.errorMsg = res.message\n          return\n        }\n        if (res.code===200) {\n          const token = res.data.token\n          setToken(token)\n          this.initDatas()\n        }\n      })\n    },\n    initDatas() {\n      this.hanLogin = true\n      this.getIndexDatas()\n      this.initTime()\n    },\n    initTime() {\n      this.creatTime()\n      setInterval(() => {\n        this.creatTime()\n      }, 1000)\n    },\n    getIndexDatas() {\n      indexData({}).then(res => {\n        if (!res.code) {\n          this.hanLogin = false\n          return\n        } else {\n          this.hanLogin = true\n          this.indexData = res.data\n          this.$refs.rightSiderRef.initTarget(res.data.target_per)\n          this.updateDatas()\n        }\n      })\n    },\n    updateDatas() {\n      getDoctorDatas({}).then(data => {\n        const res = data.data\n        const result = res.wenzhenNum\n        // 中间大数字\n        this.todayPatientOld = this.todayPatient || result.today.pat_num\n        this.todayPatient = result.today.pat_num\n        const disPat = this.todayPatient - this.todayPatientOld\n        console.log(this.todayPatientOld, disPat)\n        this.$refs.rollPatientRef.initRoll(this.todayPatientOld, disPat)\n\n        this.todayDoctorOld = this.todayDoctor || result.today.doc_num\n        this.todayDoctor = result.today.doc_num\n        const disDoc = this.todayDoctor - this.todayDoctorOld\n        this.$refs.rollDoctorRef.initRoll(this.todayDoctorOld, disDoc)\n\n        this.wenzhenNumber = result.today.wenzhen_num\n\n        // 左侧数据计算\n        this.resetLeftData()\n        // 右侧医生列表\n        this.$refs.rightSiderRef.initList(result.doctorList)\n        // 初始化中间数据\n        this.$refs.monthRef.init(this.indexData.history_num)\n        this.$refs.mapRef.init(this.indexData.pharmacyorder30)\n        \n        this.timer = setTimeout(()=> {\n          this.updateDatas()\n        }, this.updateTime)\n      })\n    },\n    resetLeftData() {\n      const leftRef = this.$refs.leftSiderRef\n      const wzNum = this.indexData.wenzhenNum\n      const yearData = wzNum.year.wenzhen_num + this.wenzhenNumber\n      const monthData = wzNum.month.wenzhen_num + this.wenzhenNumber\n      const weekData = wzNum.week.wenzhen_num + this.wenzhenNumber\n      leftRef.initWenZhen(yearData, monthData, weekData)\n\n      leftRef.initManWoman(wzNum.year.man_per / 100, wzNum.year.woman_per / 100)\n\n      leftRef.initSuggest(this.indexData.complain)\n    },\n    creatTime() {\n      const date = new Date();\n      const year = date.getFullYear();\n      const month = date.getMonth() + 1;\n      const dates = date.getDate();\n      const day = new Array(\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\")[date.getDay()];\n      const hour = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours();\n      const minute = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()\n      const seconds = date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds()\n      this.time = year + \"年\" + month + \"月\" + dates + \"日 \" + hour + \":\" + minute + \":\" + seconds + \" \" + day;\n    },\n    initBodySize() {\n      var bodyStyle = document.createElement('style')\n      bodyStyle.innerHTML = `body{width:1920px; height:1080px!important;}`\n      document.documentElement.firstElementChild.appendChild(bodyStyle)\n\n      function refreshScale() {\n        let docWidth = document.documentElement.clientWidth;\n        let docHeight = document.documentElement.clientHeight;\n        var designWidth = 1920\n        var designHeight = 1080\n        var widthRatio = docWidth / designWidth\n        var heightRatio = docHeight / designHeight; // 缩放比例\n        document.body.style = `transform:scale(\" + widthRatio + \",\" + heightRatio + \");transform-origin:left top;`;\n        // 应对浏览器 全屏切换前后 窗口因短暂滚动条问题出现未占满情况\n        setTimeout(function () {\n          var lateWidth = document.documentElement.clientWidth,\n            lateHeight = document.documentElement.clientHeight;\n          if (lateWidth === docWidth) return;\n\n          widthRatio = lateWidth / designWidth\n          heightRatio = lateHeight / designHeight\n          document.body.style = \"transform:scale(\" + widthRatio + \",\" + heightRatio + \");transform-origin:left top;\"\n        }, 0)\n      }\n      refreshScale()\n\n      window.addEventListener(\"pageshow\", function (e) {\n        if (e.persisted) { // 浏览器后退的时候重新计算\n          refreshScale()\n        }\n      }, false);\n      window.addEventListener(\"resize\", refreshScale, false);\n    }\n  }\n}\n</script>\n\n<style>\n@import \"./assets/css/page.css\"\n</style>\n"]}]}